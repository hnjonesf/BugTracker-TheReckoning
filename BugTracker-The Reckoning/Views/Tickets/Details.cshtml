@model BugTracker_The_Reckoning.Models.Ticket

@{
    ViewBag.Title = "Details of a Ticket";
}

<h2>Ticket Details:  @Html.DisplayFor(modelItem => Model.Title)</h2>

<div class="row">
    <div class="col-md-12 class=" table-bordered"">
        <table class="table table-striped">
            <tr>
                <th>
                    Created
                </th>
                <th>
                    Updated
                </th>
                <th>
                    Project
                </th>
                <th>
                    Type
                </th>
                <th>
                    Priority
                </th>
                <th>
                    Status
                </th>
                <th>
                    Owner
                </th>
                <th>
                    Assigned To
                </th>
                <th></th>
            </tr>
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => Model.Created)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.Updated)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.Project.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.TicketTypes.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.TicketPriority.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.TicketStatuses.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.OwnerUser.DisplayName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => Model.AssignedUsers)
                </td>
            </tr>
        </table>
<div class="row">
    <div class="textarea">
        @Html.DisplayFor(modelItem => Model.Description)
    </div>
</div>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-8 class table-bordered">
        <h4>Ticket Attachments</h4>
        <table class="table table-striped">
            <tr>
                <th>
                    FilePath
                </th>
                <th>
                    Description
                </th>
                <th>
                    Created
                </th>
                <th>
                    Attached By
                </th>
                <th>
                    FileUrl
                </th>
            </tr>
            @foreach (var item in Model.TicketAttachments)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.FilePath)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description);   
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Created)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Owner.DisplayName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FileUrl)
                    </td>
                </tr>
            }
            </table>

        </div>


        <div class="col-md-4 table-bordered">
            <h4>Ticket Comments</h4>
            <table class="table table-striped">
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Comment
                    </th>
                    <th>
                        Created
                    </th>
                </tr>
                @foreach (var item in Model.TicketComments)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Ticket.OwnerUser.DisplayName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Comment)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Created)
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>
    <div class="row">
        <p>
            @Html.ActionLink("Edit This Ticket", "Edit", new { id = Model.Id }) |
            @Html.ActionLink("Back to List of Tickets", "Index") |
            @Html.ActionLink("Add an Attachment", "Create", "TicketAttachments", new { TicketId = Model.Id }, null) |
            @Html.ActionLink("Add a Comment", "Create", "TicketComments", new { TicketId = Model.Id }, null)
        </p>
    </div>
